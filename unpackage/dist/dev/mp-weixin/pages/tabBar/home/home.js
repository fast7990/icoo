require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([23],{28:function(t,a,e){"use strict";var s=o(e(1)),i=o(e(29));function o(t){return t&&t.__esModule?t:{default:t}}Page((0,s.default)(i.default))},29:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e(31),i=e.n(s),o=e(36),l=!1;var n=function(t){l||e(30)},r=e(0)(i.a,o.a,n,"data-v-1e6165c6",null);r.options.__file="..\\..\\..\\..\\HBX\\icoo\\pages\\tabBar\\home\\home.vue",r.esModule&&Object.keys(r.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),r.options.functional&&console.error("[vue-loader] home.vue: functional components are not supported with templates, they should use render functions."),a.default=r.exports},30:function(t,a){},31:function(t,a,e){"use strict";(function(t){Object.defineProperty(a,"__esModule",{value:!0});var s,i=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var e=arguments[a];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s])}return t},o=e(6),l=(s=o)&&s.__esModule?s:{default:s},n=e(4),r=e(7),c=e(3);var d=null,u=null,h=["继续享受吧","可以接着抽","歇会儿再抽","建议别抽了","再抽断电喽"];a.default={data:function(){var a=JSON.stringify(this.$store.state.shareFriendCode);return{title:"蓝牙",baseusrl:"https://www.icoo.tech",screenWidth:t.getSystemInfoSync().windowWidth,canvasWidth:0,you_ranking:1550,BLEDriverData:"",shareFriendCode:a,receivingState:!1,list_data:{battery_charging:!1,bindStatus:!1,deviceName:"",driverBatter:"",driverBatterState:"",smokeInfo:h[0],bindInfo:"点击绑定设备体",dashboardValue:0,lampblack_num:0,lampblack_info:"",life_num:0,life_info:"电子烟中不含焦油等有害物质",sysPuffsNum:0,signState:0,puffsInitTime:0,puffsSort:0,sortSupport:0,sort:0,sortSum:0},cardview_data:[{glance_num:10,creat_time:"02-10",imgsrc:"http://img2.imgtn.bdimg.com/it/u=3538070765,2877117727&fm=26&gp=0.jpg"}]}},computed:i({},(0,c.mapState)({$globalData:"globalData"})),mixins:[n.childMixin,r.bluetoothKeepLive],onReady:function(){u=t.createCanvasContext("clock"),d=t.createCanvasContext("pointer"),this.canvasWidth=this.screenWidth/750*470,this.drawRing(),this.drawRunRing(this.list_data.dashboardValue)},created:function(){this.list_data.deviceName=this.$store.state.deviceName},onLoad:function(){this.keepLive()},onPullDownRefresh:function(){this.getApiData()},onShow:function(){var t=this;wx.hideLoading(),this.$store.state.BLEDriverData?(console.log(1),this.setDeviceInfo(this.$store.state.BLEDriverData,function(){t.list_data.dashboardValue=t.$globalData.dashboardValue,t.$store.commit("set_puffsIntervalTime",t.list_data.dashboardValue),t.setDeviceChange(),t.drawRunRing(t.$globalData.dashboardValue),t.getApiData()})):(console.log(2),t.unbindDevice(),t.getApiData()),console.log("首页面加载")},onHide:function(){this.$store.commit("set_onHideState",!0)},methods:{setDeviceChange:function(){var t=this.$globalData.dashboardValue;this.list_data.dashboardValue=t,this.list_data.deviceName=this.$store.state.deviceName,this.list_data.sysPuffsNum=this.$store.state.sysPuffsNum,this.list_data.bindInfo=this.$globalData.bindInfo,this.list_data.bindStatus=this.$globalData.bindStatus,this.list_data.driverBatter=this.$globalData.driverBatter,this.list_data.smokeInfo=this.$globalData.smokeInfo,this.list_data.lampblack_num=(.0017*t).toFixed(4),this.list_data.life_num=(.22*t).toFixed(2),t>0&&(this.list_data.lampblack_info="相当于少抽了"+(.02*t).toFixed(2)+"只烟节约了"+(.017*t).toFixed(2)+"元")},setDeviceInfo:function(t,a){parseInt(t[5],16);this.$store.commit("set_globalData",{bindInfo:"",bindStatus:!0}),this.$globalData.dashboardValue<=100?this.$store.commit("set_globalData",{smokeInfo:this.$globalData.smokeReady[0]}):this.$globalData.dashboardValue<=200?this.$store.commit("set_globalData",{smokeInfo:this.$globalData.smokeReady[1]}):this.$globalData.dashboardValue<=300?this.$store.commit("set_globalData",{smokeInfo:this.$globalData.smokeReady[2]}):this.$globalData.dashboardValue<=400?this.$store.commit("set_globalData",{smokeInfo:this.$globalData.smokeReady[3]}):(this.$globalData.dashboardValue,this.$store.commit("set_globalData",{smokeInfo:this.$globalData.smokeReady[4]})),a()},unbindDevice:function(){this.$store.commit("set_deviceName",""),this.$store.commit("set_BLEDriverData",""),this.$store.commit("set_globalData",{bindInfo:"",bindStatus:!1,driverBatter:"",smokeInfo:this.$globalData.smokeReady[0],totalPuffsTime:0}),this.list_data.deviceName="",this.list_data.bindInfo="",this.list_data.bindStatus=!1,this.list_data.driverBatter="",this.list_data.smokeInfo=this.$globalData.smokeInfo,this.list_data.lampblack_num=0,this.list_data.life_num=0,this.list_data.lampblack_info="",this.list_data.dashboardValue=0},keepLive:function(){var t=this,a=setInterval(function(){if(t.$store.state.bluetoothKeepLiveState){var a=t.$store.state.globalData.driverBatterState,e=t.$store.state.globalData.driverBatter;t.list_data.bindInfo=193==a?"正在充电":"",t.list_data.driverBatter=e,t.sendBLEValueChange(85)}t.showDashboardValue()},5e3);this.$store.commit("set_homeTimer",a)},childPagPuffsLogUpdata:function(t){var a=this.$store.state.onHideState,e=this.$globalData.totalPuffsTime,s="";Array.isArray(t)&&(s=parseInt(t[12],16)),console.log("onHideState",a),a&&s>e&&this.puffsLogUpdata(t),this.$store.commit("set_onHideState",!1)},showDashboardValue:function(){var t=this.$store.state.globalData.dashboardValue;t&&(this.list_data.dashboardValue=t,this.list_data.sysPuffsNum-t<0&&(this.receivingState=!0))},childPagIsUserDevice:function(t){},childPagResult:function(){},drawRing:function(){var t=this.canvasWidth/2/236;u.beginPath(),u.arc(236*t,236*t,228*t,.125*Math.PI,.875*Math.PI,!0),u.strokeStyle="#607171",u.lineWidth=14*t,u.stroke(),u.closePath(),u.beginPath();var a=u.createLinearGradient(75*t,400*t,400*t,400*t,300*t,300*t);a.addColorStop(0,"rgb(0,255,160)"),a.addColorStop(.5,"rgb(255,255,0)"),a.addColorStop(1,"rgb(255,0,0)"),u.strokeStyle=a,u.arc(236*t,236*t,221*t,.125*Math.PI,.875*Math.PI,!0),u.lineWidth=4*t,u.stroke(),u.closePath(),u.translate(236*t,236*t);for(var e=[0,"",100,"",200,"",300,"",400,"",500],s=0;s<80;s++)s%10==0?(u.beginPath(),u.lineWidth=3*t,u.strokeStyle="#00fff6",u.moveTo(218*t*Math.sin(2.25*s/180*Math.PI),-218*t*Math.cos(2.25*s/180*Math.PI)),u.lineTo(200*t*Math.sin(2.25*s/180*Math.PI),-200*t*Math.cos(2.25*s/180*Math.PI)),u.moveTo(-218*t*Math.sin(2.25*s/180*Math.PI),-218*t*Math.cos(2.25*s/180*Math.PI)),u.lineTo(-200*t*Math.sin(2.25*s/180*Math.PI),-200*t*Math.cos(2.25*s/180*Math.PI)),u.stroke(),u.closePath()):(u.beginPath(),u.lineWidth=2*t,u.strokeStyle="#00fff6",u.moveTo(215*t*Math.sin(4.5*s/180*Math.PI),-215*t*Math.cos(4.5*s/180*Math.PI)),u.lineTo(200*t*Math.sin(4.5*s/180*Math.PI),-200*t*Math.cos(4.5*s/180*Math.PI)),u.moveTo(-215*t*Math.sin(4.5*s/180*Math.PI),-215*t*Math.cos(4.5*s/180*Math.PI)),u.lineTo(-200*t*Math.sin(4.5*s/180*Math.PI),-200*t*Math.cos(4.5*s/180*Math.PI)),u.stroke());u.setFontSize(22),u.fillStyle="#00fff6",u.textAlign="center",u.textBaseline="bottom",u.rotate(-.625*Math.PI),u.fillStyle="#00fff6",u.font="10px normal";for(s=0;s<11;s++)u.fillText(e[s],0,-170*t),u.rotate(.125*Math.PI);u.rotate(-.75*Math.PI),u.fillStyle="#FFFFFF",u.setFontSize(10),u.fillText("吸烟口数",0,-90*t),u.draw()},drawRunRing:function(t){var a=t,e=this.canvasWidth,s=e/2/236;d.fillStyle="#00fcff",d.strokeStyle="#00fcff",d.font="22px bold",d.textAlign="center",d.shadowColor="#00fcff";d.translate(-275*s,-330*s),d.clearRect(236*s,236*s,e,e),d.translate(275*s,330*s),d.beginPath(),d.arc(236*s,236*s,229*s,.45*(350+a)/180*Math.PI,.125*Math.PI,!0),d.strokeStyle="#00fcff",d.lineWidth=4*s,d.stroke(),d.closePath(),d.beginPath(),d.arc(236*s,236*s,229*s,.875*Math.PI,.125*Math.PI,!0),d.strokeStyle="#17393c",d.lineWidth=60*s,d.stroke(),d.closePath(),d.draw()},getApiData:function(){var a=this,e={userCode:this.$store.state.userCode,token:this.$store.state.token,deviceCode:this.$store.state.deviceCode};console.log(e),this.$api.getDevicePage(e,function(e){t.stopPullDownRefresh(),console.log("homedata",e),1==e.data.status&&a.setHomeData(e.data),99==e.data.status&&t.showToast({title:e.data.msg,mask:!1,icon:"none",duration:1500,success:function(){setTimeout(function(){wx.navigateTo({url:"../login/login"})},1500)}})},function(a){t.stopPullDownRefresh()}),this.$api.startBanner({type:"1"},function(t){if(console.log("底部新闻",t),1==t.data.status){var e=t.data.data;e.map(function(t,a){e[a].create_time=t.create_time.substring(0,10)}),a.cardview_data=e}},function(t){console.log(t)})},setHomeData:function(t){for(var a in t.data)this.list_data[a]=t.data[a]?t.data[a]:0;console.log(this.list_data.dashboardValue,"------"),this.$store.commit("set_puffsIntervalTime",this.list_data.puffsInitTime),this.$store.commit("set_sysPuffsNum",this.list_data.sysPuffsNum),this.$store.commit("set_globalData",{sortSum:this.list_data.sortSum,sortSupport:this.list_data.sortSupport})},openBluetooth:function(a){this.list_data.bindStatus?wx.showModal({title:"提示",content:"确定要切换其它设备吗",success:function(a){a.confirm?(t.navigateTo({url:"../../API/get-bluetooth-tool/get-bluetooth-tool?switchDevice=1"}),console.log("用户点击确定")):a.cancel&&console.log("用户点击取消")}}):t.navigateTo({url:"../../API/get-bluetooth-tool/get-bluetooth-tool"})},target:function(a){""!=a&&("checkIn"!=a||0!=this.receivingState?t.navigateTo({url:"../../template/"+a+"/"+a}):t.showToast({title:"未达到领取条件",mask:!1,icon:"none",duration:1500}))},openViews:function(a){this.$store.commit("set_homeNewsTarget",a),t.navigateTo({url:"../../template/webView/webView"})}},components:{uniIcon:l.default}}}).call(a,e(2).default)},36:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("view",{staticClass:"page"},[e("view",{staticClass:"page-body uni-column"},[e("view",{staticClass:"page-section",staticStyle:{"margin-top":"15upx"}},[e("view",{staticClass:"user-list uni-column",staticStyle:{background:"#17393C"}},[e("view",{staticClass:"uni-row topinfo"},[e("text",[t._v("当前爱氪世界总人口数："+t._s(t.list_data.sortSum))]),e("text",[t._v("您是第"+t._s(t.list_data.sort)+"位居民")])]),e("view",{staticClass:"yibiao",staticStyle:{"align-items":"center","justify-content":"center"}},[e("view",{staticClass:"yibiao-box"},[e("block",{staticClass:"box neiceng"},[e("canvas",{staticClass:"canvas",attrs:{"canvas-id":"clock",width:"470px",height:"470px"}}),e("canvas",{staticClass:"canvas",attrs:{"canvas-id":"pointer",width:"470px",height:"470px"}})])],1),e("view",{staticClass:"box uni-column align-center",staticStyle:{"padding-top":"160upx",height:"auto","z-index":"10"}},[e("text",{staticClass:"box-text",staticStyle:{"font-size":"58upx"}},[t._v(t._s(t.list_data.dashboardValue>0?t.list_data.dashboardValue:0))]),e("text",{staticClass:"box-text",staticStyle:{"line-height":"44upx",background:"#7aff70","border-radius":"10upx",padding:"0 14upx","font-size":"22upx",color:"#131313"}},[t._v(t._s(t.list_data.smokeInfo))]),e("text",{staticClass:"box-text",staticStyle:{"font-size":"22upx","margin-top":"50upx"}},[t._v("轻度抽烟可以愉悦身心，健康无害")]),t.receivingState?e("text",{staticClass:"box-text reward",class:1==t.list_data.signState?"reward-after":"",attrs:{eventid:"q7y-1"},on:{tap:function(a){t.target("checkIn")}}},[t._v(t._s(t.list_data.signState?"已领取":"可领取奖励"))]):e("text",{staticClass:"box-text reward reward-after",attrs:{eventid:"GHp-0"},on:{tap:function(a){t.target("checkIn")}}},[t._v(t._s(t.list_data.signState?"已领取":"领取奖励"))]),e("text",{staticClass:"box-text",staticStyle:{"font-size":"20upx"}},[t._v("您还差"+t._s(t.list_data.sysPuffsNum-t.list_data.dashboardValue>0?t.list_data.sysPuffsNum-t.list_data.dashboardValue:0)+"口即可获得当日积分奖励")])])])])]),e("view",{staticClass:"page-section"},[e("view",{staticClass:"user-list",staticStyle:{height:"118upx"}},[e("view",{staticClass:"list0 action-row align-center",attrs:{eventid:"aUT-2"},on:{tap:t.openBluetooth}},[e("view",{staticClass:"user-list-left",staticStyle:{flex:"1"}},[t.list_data.bindStatus?e("image",{attrs:{src:"../../../static/img/bluetooth0.png",mode:""}}):e("image",{staticStyle:{width:"32upx",height:"40upx"},attrs:{src:"../../../static/img/bluetooth1.png"}})]),e("view",{staticClass:"user-list-center action-row align-center",staticStyle:{flex:"6","justify-content":"space-between"}},[e("view",[e("text",{staticClass:"user-list-text-h2",staticStyle:{"font-weight":"bold"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.list_data.bindStatus?"已绑定设备":"未绑定设备")+"\n\t\t\t\t\t\t\t")])]),e("view",[e("text",{staticClass:"user-list-text-h4"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.list_data.bindInfo)+"\n\t\t\t\t\t\t\t")])])]),e("view",{staticClass:"user-list-right",staticStyle:{flex:"1"}},[t.battery_charging?e("image",{attrs:{src:"../../../static/img/battery_charging.jpg",mode:""}}):e("image",{attrs:{src:"../../../static/img/close.png"}})])])])]),e("view",{staticClass:"page-section"},[e("view",{staticClass:"user-list align-center",staticStyle:{height:"118upx"}},[e("view",{staticClass:"list0 action-row",attrs:{eventid:"Jr5-3"},on:{tap:function(a){t.target("invitedFriend")}}},[t._m(0),t._m(1),e("view",{staticClass:"user-list-right uni-column",staticStyle:{flex:"1","align-items":"center"}})])])]),e("view",{staticClass:"page-section"},[e("view",{staticClass:"user-list align-center",staticStyle:{height:"118upx"}},[e("text",{staticStyle:{flex:"8","font-size":"28upx","font-weight":"bold"}},[t._v("设备名称："+t._s(t.list_data.deviceName?t.list_data.deviceName:""))]),e("view",{staticStyle:{flex:"1","border-left":"1upx solid #d3d3d3"}}),e("text",{staticStyle:{flex:"6","font-size":"28upx","font-weight":"bold"}},[t._v("设备电量："+t._s(t.list_data.driverBatter?t.list_data.driverBatter+"%":""))])])]),e("view",{staticClass:"page-section"},[e("view",{staticClass:"user-list uni-column"},[e("view",{staticClass:"list0"},[e("view",{staticClass:"user-list-center uni-column"},[e("view",[e("text",{staticClass:"user-list-text-h2",staticStyle:{"font-weight":"bold"}},[t._v("\n\t\t\t\t\t\t\t\t消耗油烟 "+t._s(t.list_data.lampblack_num>0?t.list_data.lampblack_num:0)+" 毫升\n\t\t\t\t\t\t\t")])]),e("view",[e("text",{staticClass:"user-list-text-h4",staticStyle:{"padding-top":"10upx"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.list_data.lampblack_info)+"\n\t\t\t\t\t\t\t")])])])]),e("view",{staticClass:"list-line0"}),e("view",{staticClass:"list0"},[e("view",{staticClass:"user-list-center uni-column"},[e("view",[e("text",{staticClass:"user-list-text-h2",staticStyle:{"font-weight":"bold"}},[t._v("\n\t\t\t\t\t\t\t\t寿命延长 "+t._s(t.list_data.life_num>0?t.list_data.life_num:0)+" 分钟\n\t\t\t\t\t\t\t")])]),e("view",[e("text",{staticClass:"user-list-text-h4",staticStyle:{"padding-top":"10upx"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.list_data.life_info)+"\n\t\t\t\t\t\t\t")])])])])])]),e("view",{staticClass:"page-section"},[e("view",{staticClass:"user-list"},[e("view",{staticClass:"list0 action-row align-center",attrs:{eventid:"XOo-4"},on:{tap:function(a){t.target("ranking")}}},[t._m(2),e("view",{staticClass:"user-list-center uni-column",staticStyle:{flex:"6"}},[e("view",[e("text",{staticClass:"user-list-text-h2",staticStyle:{"font-weight":"bold"}},[t._v("\n\t\t\t\t\t\t\t\t健康排行榜 "+t._s(t.list_data.puffsSort)+"名\n\t\t\t\t\t\t\t")])])]),e("view",{staticClass:"user-list-right uni-column",staticStyle:{flex:"1","align-items":"center"}},[e("image",{attrs:{src:"../../../static/img/dianzan.png"}}),e("text",{staticClass:"user-list-text-h4",staticStyle:{"text-align":"center"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.list_data.sortSupport)+"\n\t\t\t\t\t\t")])])])])]),t._m(3),e("view",{staticClass:"page-section uni-column"},t._l(t.cardview_data,function(a,s){return e("view",{key:s,staticClass:"user-list uni-column",staticStyle:{"margin-bottom":"20upx"}},[e("view",{staticClass:"user-list-cardview-top",staticStyle:{width:"100%"},attrs:{eventid:"Qlv-5-"+s},on:{tap:function(e){t.openViews(a.banner_href)}}},[e("image",{attrs:{src:a.banner_url?t.baseusrl+a.banner_url:""}})]),e("view",{staticClass:"user-list-cardview-bottom uni-column",staticStyle:{width:"100%"}},[e("view",{staticClass:"user-text"},[e("text",{staticStyle:{"font-size":"30upx",flex:"1"}},[t._v("\n\t\t\t\t\t\t\t"+t._s(a.banner_name)+"\n\t\t\t\t\t\t")])]),e("view",{staticClass:"user-text",staticStyle:{"justify-content":"space-between"}},[e("view",{staticClass:"align-center"},[e("image",{staticStyle:{width:"23upx",height:"16upx"},attrs:{src:"../../../static/img/eye.png"}}),e("text",{staticClass:"user-list-text-h4"},[t._v(" "+t._s(a.bannerid))])]),e("view",{staticClass:"align-center"},[e("text",{staticClass:"user-list-text-h4"},[t._v(t._s(a.create_time))])])])])])}))])])};s._withStripped=!0;var i={render:s,staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("view",{staticClass:"user-list-left",staticStyle:{flex:"1"}},[a("image",{attrs:{src:"../../../static/img/paihang.png"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("view",{staticClass:"user-list-center uni-column",staticStyle:{flex:"6"}},[a("view",[a("text",{staticClass:"user-list-text-h2",staticStyle:{"font-weight":"bold"}},[this._v("\n\t\t\t\t\t\t\t\t邀请好友共享健康\n\t\t\t\t\t\t\t")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("view",{staticClass:"user-list-left",staticStyle:{flex:"1"}},[a("image",{attrs:{src:"../../../static/img/paihang.png"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("view",{staticClass:"page-section",staticStyle:{margin:"0","justify-content":"flex-start"}},[a("text",{staticClass:"text-h1",staticStyle:{"font-size":"36upx","font-weight":"bold"}},[this._v("icoo爱氪生活")])])}]};a.a=i}},[28]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/tabBar/home/home.js.map