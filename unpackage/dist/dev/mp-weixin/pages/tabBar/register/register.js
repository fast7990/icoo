require("../../../common/manifest.js");
require("../../../common/vendor.js");
global.webpackJsonp([20],{23:function(t,e,o){"use strict";var i=n(o(1)),s=n(o(24));function n(t){return t&&t.__esModule?t:{default:t}}Page((0,i.default)(s.default))},24:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(26),s=o.n(i),n=o(27),a=!1;var r=function(t){a||o(25)},c=o(0)(s.a,n.a,r,"data-v-639348c6",null);c.options.__file="..\\..\\..\\..\\HBX\\icoo\\pages\\tabBar\\register\\register.vue",c.esModule&&Object.keys(c.esModule).some(function(t){return"default"!==t&&"__"!==t.substr(0,2)})&&console.error("named exports are not supported in *.vue files."),c.options.functional&&console.error("[vue-loader] register.vue: functional components are not supported with templates, they should use render functions."),e.default=c.exports},25:function(t,e){},26:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i])}return t},s=o(3);e.default={data:function(){return{bgimgsrc:"http://hashcredit.io/html/img/loginbg.png",submit_status:!0,userInfo:"",mobile:"",verifyCode:"",encryptedData:"",iv:"",code:"",losetime:0}},computed:i({},(0,s.mapState)({$globalData:"globalData"})),onLoad:function(){var t=this;this.getUserInfofs(function(){t.submit_status=!1})},methods:{getUserInfofs:function(t){var e=this;wx.getUserInfo({success:function(o){console.log("已授权获取用户信息",o),e.encryptedData=o.encryptedData,e.iv=o.iv,e.userInfo=o.userInfo,wx.login({success:function(o){console.log(o),e.code=o.code,console.log("code码",o.code),t()}})}})},bindLogin:function(){var e=this;if(this.mobile.length<11)t.showToast({icon:"none",title:"手机号输入错误"});else if(this.verifyCode.length<4)t.showToast({icon:"none",title:"验证码错误"});else{var o={code:this.code,mobile:this.mobile,verifyCode:this.verifyCode,encryptedData:this.encryptedData,iv:this.iv,parentCode:this.$store.state.shareFriendCode};console.log(o),wx.request({url:this.$globalData.urlPath+"/app/wx/xcxRegistlogin",data:o,method:"POST",header:{"Content-Type":"application/x-www-form-urlencoded"},success:function(o){console.log(o),1==o.data.status?(e.$store.commit("set_userCode",o.data.userCode),e.$store.commit("set_invitationCode",o.data.invitationCode),e.$store.commit("set_token",o.data.token),e.$store.commit("set_score",o.data.score),t.showToast({icon:"success",title:"注册成功",success:function(){t.switchTab({url:"../home/home"})}})):0==o.data.status?t.showToast({icon:"none",title:o.data.msg}):t.showToast({icon:"none",title:"注册失败"})},fail:function(t){console.log("err",t)}})}},getVerifyCode:function(){var e=this,o=(new Date).getTime();if(this.losetime>o){var i=parseInt((this.losetime-o)/1e3);t.showToast({icon:"none",title:"请等待"+i+"秒后重发"})}else if(this.mobile.length<11)t.showToast({icon:"none",title:"手机号输入错误"});else{var s={mobile:this.mobile};this.$api.sendVerifyCode(s,function(o){if(console.log(o),1==o.data.status){var i=(new Date).getTime();e.losetime=i+3e4,t.showToast({icon:"success",title:"验证码已发送"})}},function(t){console.log(t)})}}}}}).call(e,o(2).default)},27:function(t,e,o){"use strict";var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("view",{staticClass:"page"},[o("view",{staticClass:"page-body uni-column"},[o("view",{staticClass:"page-section uni-column"},[t._m(0),o("view",{staticClass:"input-group uni-column align-center"},[o("view",{staticClass:"input-row align-center"},[o("image",{attrs:{src:"../../../static/img/login/name.png",mode:""}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],staticStyle:{width:"100%"},attrs:{type:"text",placeholder:"请输入手机号",eventid:"d71-0"},domProps:{value:t.mobile},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}})]),o("view",{staticClass:"input-row align-center"},[o("image",{attrs:{src:"../../../static/img/login/shoujiyanzheng.png",mode:""}}),o("input",{directives:[{name:"model",rawName:"v-model",value:t.verifyCode,expression:"verifyCode"}],staticStyle:{flex:"1"},attrs:{type:"text",placeholder:"请输入验证码",eventid:"0ow-1"},domProps:{value:t.verifyCode},on:{input:function(e){e.target.composing||(t.verifyCode=e.target.value)}}}),o("view",{staticClass:"code justify-center",staticStyle:{height:"2em",width:"auto"},attrs:{eventid:"dhO-2"},on:{tap:t.getVerifyCode}},[t._v("\n\t\t\t\t\t\t点击获取验证码\n\t\t\t\t\t")])])])]),o("view",{staticClass:"page-section justify-center",staticStyle:{"margin-top":"150upx"}},[o("view",{staticClass:"btn-row"},[o("button",{staticClass:"primary",attrs:{type:"primary","hover-class":"uni-list-cell-hover",disabled:t.submit_status,eventid:"Bz2-3"},on:{tap:t.bindLogin}},[t._v("注册并登录")])],1)])]),t._m(1)])};i._withStripped=!0;var s={render:i,staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"justify-center toplogo"},[e("image",{staticStyle:{width:"138upx",height:"138upx"},attrs:{src:"../../../static/img/icoologo.png",mode:""}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("view",{staticClass:"imgbg"},[e("image",{attrs:{src:"../../../static/img/login/bglogin.jpg",mode:""}})])}]};e.a=s}},[23]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/tabBar/register/register.js.map